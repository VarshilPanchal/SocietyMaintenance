<nav class="d-flex align-self-center main-nav bg-primary text-white">
    <div class="py-2 pl-4">
        Expenses and Income
    </div>
</nav>
<p-tabView styleClass="tabview-custom p-3" (onChange)="handleChange($event)">

    <p-tabPanel>
        <ng-template pTemplate="header">
            <span>Expenses</span>
        </ng-template>

        <ng-container>
            <button class="p-button bg-primary rounded" (click)="createVoucher()">
                Add Voucher
            </button>
            <ng-container>
                <p-table tyleClass="p-datatable-gridlines" [scrollable]="true" scrollHeight="400px" [value]="expenseData"
                class="mx-3">
                <ng-template pTemplate="header">
                    <tr>
                        <th *ngFor="let col of expenseCols" pResizableColumn>
                            {{col.header}}
                        </th>
                    </tr>
                </ng-template>
                <ng-template pTemplate="body" let-expense>
                    <tr>
                        <td>
                            {{expense.amount}}
                        </td>
                        <td>
                            {{expense.pay_type}}
                        </td>
                        <td>
                            {{expense.description}}
                        </td>
                        <td>
                            <button class="p-button bg-primary rounded" (click)="viewVoucher()">
                                View Voucher
                            </button>                            
                        </td>
                    </tr>
                </ng-template>
            </p-table>
            </ng-container>
            <div *ngIf="!expenseData?.length">
                <h5 class="text-muted text-center mt-3">No record found</h5>
            </div>
        </ng-container>
    



        




     


    </p-tabPanel>

    <!-- review submitted -->
    <p-tabPanel>
        <ng-template pTemplate="header">
            <span>Income</span>
        </ng-template>

        <ng-container>
            <ng-container>
                <p-table tyleClass="p-datatable-gridlines" [scrollable]="true" scrollHeight="400px" [value]="incomeData"
                class="mx-3">
                <ng-template pTemplate="header">
                    <tr>
                        <th *ngFor="let col of cols" pResizableColumn>
                            {{col.header}}
                        </th>
                    </tr>
                </ng-template>
                <ng-template pTemplate="body" let-income>
                    <tr>
                        <td>
                            {{income.amount}}
                        </td>
                        <td>
                            {{income.pay_type}}
                        </td>
                        <td>
                            {{income.description}}
                        </td>
                       
                    </tr>
                </ng-template>
            </p-table>
            </ng-container>
            <div *ngIf="!incomeData?.length">
                <h5 class="text-muted text-center mt-3">No record found</h5>
            </div>
        </ng-container>
        

        
    </p-tabPanel>

       
</p-tabView>
<p-dialog [(visible)]="voucherDialog" [style]="{width: '450px'}" header="{{popupHeader}}" [modal]="true"
    styleClass="p-fluid" (onHide)="hideExpenseDialog()">

    <ng-template pTemplate="content">
        <form [formGroup]="expenseFormGroup" (ngSubmit)="onSubmitExpense()">
            <div class="p-field">
                <label for="name">Amount* </label>
                <input type="text" pInputText id="regionName" formControlName="amount" placeholder="Enter Amount"
                    required pKeyFilter="num" maxLength="50" />
                <div class="p-invalid"
                    *ngIf="expenseFormGroup.controls['amount'].touched && (expenseFormGroup.controls['amount'].hasError('required') && !expenseFormGroup.controls['amount'].valid)">
                    required
                </div>
            </div>
            <div class="p-field">
                <label for="name">Description* </label>
                <input type="text" pInputText id="regionName" formControlName="description" placeholder="Enter Description"
                    required maxLength="50" />
                <div class="p-invalid"
                    *ngIf="expenseFormGroup.controls['amount'].touched && (expenseFormGroup.controls['amount'].hasError('required') && !expenseFormGroup.controls['amount'].valid)">
                    required
                </div>
            </div>
        </form>
        {{amountInWords}}
    </ng-template>

    <ng-template pTemplate="footer">
        <button pButton pRipple label="Cancel" icon="pi pi-times" class="bg-admin"
            (click)="hideExpenseDialog()"></button>
        <button pButton pRipple label="Save" icon="pi pi-check" class="p-button-outlined"
            (click)="onSubmitExpense()"></button>
    </ng-template>

</p-dialog>

<p-dialog [(visible)]="viewVoucherDialog" [style]="{width: '450px'}" header="{{popupHeader}}" [modal]="true"
    styleClass="p-fluid" (onHide)="hideVoucherDialog()">

   

    <ng-template pTemplate="footer">
        <button pButton pRipple label="Cancel" icon="pi pi-times" class="bg-admin"
            (click)="hideVoucherDialog()"></button>
    </ng-template>

</p-dialog>